<div class="invoice-header">
    <h2 style="text-align:center;">Pharmacy Management System</h2>
    <h4 style="text-align:center;">Invoice #{{ invoice.invoice_id }}</h4>
    <p class="text-muted" style="text-align:center;">Generated on {{ invoice.created_at|date:"F d, Y \a\t H:i" }}</p>
</div>

<hr>

<div class="row">
    <div class="col-md-6">
        <h6>Customer Information:</h6>
        <p><strong>Name:</strong> {{ invoice.customer_name }}</p>
        {% if invoice.phone_number %}
        <p><strong>Phone:</strong> {{ invoice.phone_number }}</p>
        {% endif %}
        <p><strong>Billed By:</strong> {{ invoice.billed_by }}</p>
    </div>
    <div class="col-md-6">
        <h6>Payment Details:</h6>
        <p><strong>Method:</strong> {{ invoice.get_payment_method_display }}</p>
        {% if invoice.payment_method == "cash" and invoice.amount_received %}
        <p><strong>Amount Received:</strong> NRS {{ invoice.amount_received|floatformat:2 }}</p>
        <p><strong>Change:</strong> NRS {{ invoice.return_amount|floatformat:2 }}</p>
        {% endif %}
    </div>
</div>

<hr>

<h5>Items</h5>
<table style="width:100%; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="border:1px solid #000; padding:5px;">#</th>
            <th style="border:1px solid #000; padding:5px;">Medicine</th>
            <th style="border:1px solid #000; padding:5px;">Qty</th>
            <th style="border:1px solid #000; padding:5px;">Price</th>
            <th style="border:1px solid #000; padding:5px;">Total</th>
        </tr>
    </thead>
    <tbody>
        {% for item in invoice.items.all %}
        <tr>
            <td style="border:1px solid #000; padding:5px;">{{ forloop.counter }}</td>
            <td style="border:1px solid #000; padding:5px;">{{ item.medicine.name }}</td>
            <td style="border:1px solid #000; padding:5px;">{{ item.quantity }}</td>
            <td style="border:1px solid #000; padding:5px;">NRS {{ item.price|floatformat:2 }}</td>
            <td style="border:1px solid #000; padding:5px;">NRS {{ item.total|floatformat:2 }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" style="border:1px solid #000; text-align:center;">No items found</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<hr>

<div style="text-align:right; margin-top:10px;">
    <p><strong>Subtotal:</strong> NRS {{ invoice.subtotal|floatformat:2 }}</p>
    <p><strong>Discount:</strong> NRS {{ invoice.discount|floatformat:2 }}</p>
    <p><strong>Total:</strong> NRS {{ invoice.total|floatformat:2 }}</p>
</div>

<div class="text-center" style="margin-top:20px;">
    <p>Thank you for your business!</p>
    <p>Visit us again soon!</p>
</div>
